<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>AkadBaiQ</title>
  <link rel="stylesheet" type="text/css" href="css/bulma.min.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" type="text/css" href="css/extension.css">
  <link rel="shortcut icon" type="image/png" href="img/favicon.png"/>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">
</head>
<body>

  <div class="modal modal-left point-map">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title is-size-6">Gunakan Titik Lokasi Anda</p>
        <button class="delete" aria-label="close"></button>
      </header>
      <section class="modal-card-body relative">
        <div class="search-point">
          <div class="field">
            <div class="control">
              <input class="input inp_name" type="text" placeholder="Cari Alamat">
            </div>
          </div>
        </div>
        <div id="somecomponent" class="margin-auto" style="width: 500px; height: 400px;"></div>
      </section>
      <footer class="modal-card-foot j-center">
        <button class="button btn-akadQ w-250">Ambil Alamat</button>
      </footer>
    </div>
  </div>

  <section class="hero">
    <div class="columns">
      <div class="column for-left is-narrow pb0">
        <div class="left-menu is-back-grey">
          <div class="brand-icon has-text-centered">
            <a href="home-mitra"><img src="img/logo.png" alt="Logo" width="70%"></a>
          </div>
          <aside class="menu">
            <ul class="menu-list">
              <li><a href="mitra-dashboard.html">Dashboard</a></li>
              <li class="is-active"><a href="mitra-pengaturan-peternakan.html">Pengaturan Peternakan</a></li>
              <li><a href="mitra-pengaturan-hewan.html">Pengaturan Hewan</a></li>
              <li><a href="mitra-transaksi-anda.html">Transaksi Anda</a></li>
          </aside>
        </div>
      </div>
      <div class="column for-right">
        <div class="right-menu">
          <nav class="level top-menu">
            <div class="level-left">
            </div>
            <div class="level-right">
              <div class="level-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31.244 35" width="20">
                  <defs>
                    <style>
                      .mail {
                        fill: #707070;
                      }
                    </style>
                  </defs>
                  <g id="mail-open-file" transform="translate(-2.673 -1.07)">
                    <path id="Path_31829" data-name="Path 31829" class="mail" d="M33.8,15.454,20.209,1.864a2.705,2.705,0,0,0-3.828,0L13.418,4.827H8.923V9.32l-6.25,6.248v20.5H33.916v-20.5l-.116-.116Zm-1.294.475-4.84,4.84V11.09l4.84,4.84ZM17.263,2.746a1.493,1.493,0,0,1,2.062,0L21.4,4.825h-6.22l2.079-2.079Zm5.389,3.329L26.416,9.84V22.018l-2.894,2.894L20.206,21.6a2.705,2.705,0,0,0-3.828,0L13.013,24.96,10.17,22.116V6.076H22.651ZM4.674,15.334l4.248-4.248v9.779l-4.89-4.89.642-.642Zm-.752,3.3v-1l8.208,8.208-.093.094h0L3.921,34.049V18.637Zm1,16.182.672-.672h0L17.263,22.478a1.493,1.493,0,0,1,2.062,0L31.668,34.819H4.919Zm27.747-17V34.05L24.407,25.8l8.259-8.259v.284Z" transform="translate(0)"/>
                    <path id="Path_31830" data-name="Path 31830" class="mail" d="M12.268,8.539h8.749V9.788H12.268Z" transform="translate(1.651 1.285)"/>
                    <path id="Path_31831" data-name="Path 31831" class="mail" d="M12.268,14.937h8.749v1.249H12.268Z" transform="translate(1.651 2.386)"/>
                    <path id="Path_31832" data-name="Path 31832" class="mail" d="M12.268,11.738h6.248v1.249H12.268Z" transform="translate(1.651 1.836)"/>
                  </g>
                </svg>
              </div>
              <div class="level-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31.45 36.7" width="20">
                  <defs>
                    <style>
                      .notif {
                        fill: none;
                        stroke: #707070;
                        stroke-width: 1.7px;
                      }
                    </style>
                  </defs>
                  <g id="Group_33759" data-name="Group 33759" transform="translate(-1630.15 -90.15)">
                    <g id="notifications-button" transform="translate(1592.75 91)">
                      <g id="notifications">
                        <path id="Path_75" data-name="Path 75" class="notif" d="M53.125,35a3.51,3.51,0,0,0,3.5-3.5h-7A3.51,3.51,0,0,0,53.125,35ZM64.5,24.5V14.875A11.261,11.261,0,0,0,55.75,3.85V2.625a2.625,2.625,0,1,0-5.25,0V3.85a11.261,11.261,0,0,0-8.75,11.025V24.5L38.25,28v1.75H68V28Z"/>
                      </g>
                    </g>
                  </g>
                </svg>
              </div>
              <div class="level-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 35" width="20">
                  <defs>
                    <style>
                      .akun {
                        fill: #5f6061;
                      }
                    </style>
                  </defs>
                  <path id="user_1_" data-name="user (1)" class="akun" d="M35,17.5A17.5,17.5,0,1,0,5.68,30.391l-.017.015.568.479c.037.031.077.057.114.087.3.25.614.487.932.717.1.074.206.149.311.221q.51.351,1.045.667c.078.046.156.09.234.135.39.222.788.431,1.2.624l.09.041a17.342,17.342,0,0,0,4.232,1.34l.117.021c.461.08.927.143,1.4.186l.172.013c.47.039.944.064,1.425.064s.947-.025,1.414-.062l.178-.013q.7-.064,1.386-.183l.119-.022a17.342,17.342,0,0,0,4.173-1.308l.146-.066q.589-.277,1.152-.6.14-.079.279-.161c.342-.2.679-.412,1.006-.636.118-.08.233-.165.349-.249.279-.2.554-.409.82-.626.059-.048.123-.089.181-.138l.582-.486-.017-.015A17.455,17.455,0,0,0,35,17.5Zm-33.727,0A16.227,16.227,0,1,1,28.262,29.631a4.769,4.769,0,0,0-.568-.342L22.305,26.6a1.411,1.411,0,0,1-.784-1.268V23.446c.125-.154.256-.328.393-.52a12.968,12.968,0,0,0,1.665-3.26,2.31,2.31,0,0,0,1.327-2.093V15.317a2.315,2.315,0,0,0-.564-1.508v-2.97a5.133,5.133,0,0,0-1.2-3.732C21.97,5.769,20.072,5.091,17.5,5.091s-4.47.678-5.643,2.016a5.133,5.133,0,0,0-1.2,3.732v2.97a2.319,2.319,0,0,0-.564,1.508v2.256a2.315,2.315,0,0,0,.853,1.8,11.957,11.957,0,0,0,1.968,4.066v1.842a1.42,1.42,0,0,1-.739,1.246L7.144,29.265a4.6,4.6,0,0,0-.479.3A16.188,16.188,0,0,1,1.273,17.5ZM27.019,30.629q-.334.242-.679.468c-.106.069-.211.137-.318.2-.3.186-.606.363-.918.528-.069.036-.138.071-.207.106a16.215,16.215,0,0,1-2.22.939L22.6,32.9q-.6.2-1.212.351h0c-.412.1-.83.186-1.25.256l-.034.006c-.4.064-.794.111-1.193.146-.071.006-.141.011-.213.016-.4.03-.792.049-1.191.049s-.806-.02-1.206-.05c-.069-.005-.139-.01-.207-.016-.4-.036-.805-.083-1.2-.148l-.053-.01a16.167,16.167,0,0,1-2.475-.618l-.075-.025q-.6-.2-1.185-.454l-.008,0c-.368-.158-.729-.334-1.085-.519-.046-.024-.094-.047-.139-.072-.325-.174-.643-.361-.957-.557q-.139-.088-.277-.178c-.289-.189-.574-.386-.851-.594l-.085-.066.061-.034,5.032-2.745a2.691,2.691,0,0,0,1.4-2.363V22.982l-.146-.177a10.625,10.625,0,0,1-1.91-3.956l-.058-.252-.217-.141a1.055,1.055,0,0,1-.489-.886V15.315a1.039,1.039,0,0,1,.354-.778l.21-.19V10.8l-.006-.083a3.833,3.833,0,0,1,.888-2.775c.92-1.049,2.5-1.581,4.686-1.581s3.752.528,4.675,1.569a3.9,3.9,0,0,1,.9,2.788l-.006,3.628.21.19a1.04,1.04,0,0,1,.354.778v2.256a1.063,1.063,0,0,1-.752,1l-.316.1-.1.315a11.773,11.773,0,0,1-1.588,3.2c-.167.235-.329.444-.468.6l-.158.18v2.354a2.676,2.676,0,0,0,1.488,2.407l5.388,2.694.1.053C27.158,30.532,27.088,30.58,27.019,30.629Z"/>
                </svg>
                <div class="accoount-name ml0h">
                  Khariz Kharaij
                </div>
              </div>
            </div>
          </nav>
          <!-- content -->
          <div class="content has-text-centered">
            <div class="title">
              Data Peternakan
            </div>
            <p class="subtitle is-size-6 fw300">Masukan data-data peternakan Anda dibawah ini secara lengkap</p>
            <!-- pribadi -->
            <div class="pribadi">
              <div class="columns is-centered mt1">
                <div class="column is-8">
                  <div class="badanusaha none">
                    <div class="columns">
                      <div class="column">
                        <div class="field mt1">
                          <label class="label has-text-left">Nama Badan Usaha</label>
                          <div class="control">
                            <input class="input" type="text" placeholder="Nama Badan Usaha">
                          </div>
                        </div>
                      </div>
                      <div class="column">
                        <div class="field mt1">
                          <label class="label has-text-left">Nomor SIUP</label>
                          <div class="control">
                            <input class="input" type="text" placeholder="Nomor SIUP">
                          </div>
                        </div>
                      </div>
                    </div>
                    <hr>
                  </div>
                  <div class="columns">
                    <div class="column">
                      <div class="field mt1">
                        <label class="label has-text-left">Nama Penanggung Jawab</label>
                        <div class="control">
                          <input class="input inp_name" type="text" placeholder="Nama Penanggung Jawab">
                        </div>
                      </div>
                      <div class="field mt1">
                        <label class="label has-text-left">Alamat Peternakan</label>
                        <div class="control">
                          <textarea class="textarea inp_alamatp" placeholder="Alamat Peternakan"></textarea>
                        </div>
                      </div>
                      <div class="field mt1">
                        <label class="label has-text-left">Pin Alamat (opsional)</label>
                        <div class="pin-point relative">
                          <a href="#" class="button btn-map">Ubah Lokasi</a>
                        </div>
                        <label class="label location-label-lat mb0">Latitude - Longitude</label>
                        <label class="label location-label-add">Jl. Kemandoran 3 RT 11 RW 03 No. 44</label>
                      </div>
                    </div>
                    <div class="column">
                      <div class="field mt1">
                        <label class="label has-text-left">Nama Peternakan</label>
                        <div class="control">
                          <input class="input inp_namep" type="text" placeholder="Nama Peternakan">
                        </div>
                      </div>
                      <div class="field has-text-left mt1">
                        <label class="label">Komoditas Hewan</label>
                        <input class="is-checkradio is-info inp_animal" id="sapi" type="checkbox" name="sapi" value="sapi" checked="checked">
                        <label for="sapi" class="no-margin">Sapi</label>
                        <input class="is-checkradio is-info inp_animal" id="kambing" type="checkbox" name="kambing" value="kambing">
                        <label for="kambing" class="no-margin">Kambing</label>
                        <input class="is-checkradio is-info inp_animal" id="domba" type="checkbox" value="domba" name="domba">
                        <label for="domba" class="no-margin">Domba</label>
                      </div>
                      <div class="field has-text-left mt1">
                        <label class="label">Jenis Program</label>
                        <input class="is-checkradio is-info inp_program" id="kurban" type="checkbox" name="kurban" value="kurban" checked="checked">
                        <label for="kurban" class="no-margin">Qurban</label>
                        <input class="is-checkradio is-info inp_program" id="akikah" type="checkbox" name="akikah" value="akikah">
                        <label for="akikah" class="no-margin">Aqiqah</label>
                      </div>
                      <div class="field mt2h">
                        <label class="label has-text-left mb-75">Upload Foto Peternakan</label>
                        <input type="file" class="inputfile inputfile-2" id="file" >
                        <label for="file">
                          <div class="pic-ternak pointer">
                            <div>
                              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75 67.5" width="50">
                                <defs>
                                  <style>
                                    .pic-ternak {
                                      fill: #a7a7a7;
                                    }
                                  </style>
                                </defs>
                                <g id="camera" transform="translate(0 -25.5)">
                                  <g id="camera-alt" transform="translate(0 25.5)">
                                    <circle id="Ellipse_71" data-name="Ellipse 71" class="pic-ternak" cx="12" cy="12" r="12" transform="translate(25.5 25.5)"/>
                                    <path id="Path_31604" data-name="Path 31604" class="pic-ternak" d="M26.25,25.5,19.5,33H7.5A7.522,7.522,0,0,0,0,40.5v45A7.522,7.522,0,0,0,7.5,93h60A7.522,7.522,0,0,0,75,85.5v-45A7.522,7.522,0,0,0,67.5,33h-12l-6.75-7.5ZM37.5,81.75A18.75,18.75,0,1,1,56.25,63,18.568,18.568,0,0,1,37.5,81.75Z" transform="translate(0 -25.5)"/>
                                  </g>
                                </g>
                              </svg>
                            </div>
                          </div>
                        </label>
                        <div id="filename" class="mt0h">File format: jpg atau png</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="field mt2">
              <a href="mitra-pengaturan-peternakan.html" class="button btn-akadQ w-250 btn_submit">Simpan</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script src="js/jquery.min.js"></script>
  <script src='http://maps.google.com/maps/api/js?sensor=false&libraries=places'></script>
  <script src="js/locationpicker.jquery.js"></script>
  <script>
    $('#somecomponent').locationpicker();
  
    /* remove array function */
    Array.prototype.remove = function() {
      var what, a = arguments, L = a.length, ax;
      while (L && this.length) {
        what = a[--L];
        while ((ax = this.indexOf(what)) !== -1) {
          this.splice(ax, 1);
        }
      }
      return this;
    };

    var name;
    var age; /* NO REK */
    var email;
    var gender; /* NPWP */
    var address;
    var phone;
    var requisitionType
    var education /* ATASNAMA */
    var ranchAddress
    var ranchDescription /* NAMA PETERNAKAN */
    var programType = [];
    var ktp;
    var image_1;
    
    function jadi_mitra(){
       name = $(".inp_name").val();
       email = $(".inp_email").val();
       gender = $(".inp_npwp").val(); /* NPWP */
       address = $(".inp_address").val();
       phone = $(".inp_phone").val();
       education = $(".inp_accnumb").val();/* NO REK */
       age = $(".inp_accname").val(); /* ATASNAMA */
       ranchAddress = $(".inp_alamatp").val();
       ranchDescription  = $(".inp_namep").val(); /* NAMA PETERNAKAN */
       ktp = $(".inp_idnumb").val();;
       image_1="ok";
       
       $.ajax({
          method: "POST",
          url: "http://13.251.128.231:8080/api/mitra/",
          //type:"json",
          data: {
            name: name,
            email: email,
            gender : gender,
            address : address,
            phone : phone,
            education : education,
            requisitionType : requisitionType,
            age : age,
            ranchAddress : ranchAddress,
            ranchDescription : ranchDescription,
            programType : programType,
            ktp : ktp,
            image_1:image_1
          },
          success:function( response ) {
          // alert("Form Berhasil Dikirim!")
          window.location="pengajuan-mitra3.html";
          },
          error:function(er){
            // alert(er.responseJSON.error_description);
          }
        }); 
    }
    
    $(document).ready(function(){
      $("input [type='text'], textarea").val("");
      $(".btn_submit").click(jadi_mitra)
    });
    
    $(".inp_program").click(function(){
      if($(this).is(':checked')){
        programType.push($(this).val());
      }else{
        programType.remove($(this).val())
      }
    })
    
    function pilih(param) {
      if(param == "pribadi") {
        $('.badanusaha').addClass('none').removeClass('block')
        requisitionType = "PERSONAL"
      } else {
        $('.badanusaha').addClass('block').removeClass('none')
        requisitionType = "CORPORATE"
      }
    }

    $('.btn-map').click(function(){
      $('.point-map').addClass('is-active')
    })
    $('.delete').click(function(){
      $('.point-map').removeClass('is-active')
    })


    document.getElementById("file").onchange = function(event) {
      var file = document.getElementById("file");
      if(file.files.length > 0)
      {

        var pathFile = file.value
        var nameFile = file.files[0].name
        var typeFile = file.files[0].type

        if(typeFile != 'image/jpg' && typeFile != 'image/jpeg' && typeFile != 'image/png'){
          alert('format file tidak didukung')
          $('.pic-ternak svg').addClass('block').removeClass('none')
          $('.pic-ternak').css('background-image', 'url()')
          $('#filename').text("File format: jpg atau png");
          return false
        }

        var reader = new FileReader();
        reader.readAsDataURL(event.srcElement.files[0]);
        var me = this;
        reader.onload = function () {
          var fileContent = reader.result;
          console.log(reader);
          $('#filename').text(file.files[0].name);
          $('.pic-ternak svg').addClass('none');
          $('.pic-ternak').css('background-image', 'url('+fileContent+')');
          $('.pic-ternak').css('background-size', 'contain');
          $('.pic-ternak').css('background-repeat', 'no-repeat');
          $('.pic-ternak').css('background-position', 'center');
        }
      }
    } 
    
  </script>
</body>
</html>